# 6号艇の複勝予測に関するドキュメント
最良のハイパーパラメーター: {'bootstrap': True, 'max_depth': 10, 'min_samples_leaf': 2, 'min_samples_split': 5, 'n_estimators': 100}
カスタム閾値: 0.1
Accuracy: 0.4070711896798853
AUC Score: 0.7242283170176642
Classification Report:
              precision    recall  f1-score   support

           0       0.96      0.18      0.31      1504
           1       0.32      0.98      0.48       589

    accuracy                           0.41      2093
   macro avg       0.64      0.58      0.39      2093
weighted avg       0.78      0.41      0.36      2093

Confusion Matrix:
[[ 276 1228]
 [  13  576]]
カスタム閾値: 0.2
Accuracy: 0.5441949354992833
AUC Score: 0.7242283170176642
Classification Report:
              precision    recall  f1-score   support

           0       0.88      0.42      0.57      1504
           1       0.37      0.85      0.51       589

    accuracy                           0.54      2093
   macro avg       0.62      0.64      0.54      2093
weighted avg       0.74      0.54      0.56      2093

Confusion Matrix:
[[636 868]
 [ 86 503]]
カスタム閾値: 0.30000000000000004
Accuracy: 0.6679407548972767
AUC Score: 0.7242283170176642
Classification Report:
              precision    recall  f1-score   support

           0       0.83      0.68      0.75      1504
           1       0.44      0.65      0.52       589

    accuracy                           0.67      2093
   macro avg       0.63      0.66      0.63      2093
weighted avg       0.72      0.67      0.68      2093

Confusion Matrix:
[[1016  488]
 [ 207  382]]
カスタム閾値: 0.4
Accuracy: 0.7195413282369804
AUC Score: 0.7242283170176642
Classification Report:
              precision    recall  f1-score   support

           0       0.80      0.82      0.81      1504
           1       0.50      0.47      0.49       589

    accuracy                           0.72      2093
   macro avg       0.65      0.64      0.65      2093
weighted avg       0.71      0.72      0.72      2093

Confusion Matrix:
[[1227  277]
 [ 310  279]]
カスタム閾値: 0.5
Accuracy: 0.7415193502150024
AUC Score: 0.7242283170176642
Classification Report:
              precision    recall  f1-score   support

           0       0.77      0.92      0.84      1504
           1       0.58      0.30      0.39       589

    accuracy                           0.74      2093
   macro avg       0.67      0.61      0.61      2093
weighted avg       0.72      0.74      0.71      2093

Confusion Matrix:
[[1378  126]
 [ 415  174]]
カスタム閾値: 0.6000000000000001
Accuracy: 0.7233635929288104
AUC Score: 0.7242283170176642
Classification Report:
              precision    recall  f1-score   support

           0       0.73      0.97      0.83      1504
           1       0.55      0.10      0.17       589

    accuracy                           0.72      2093
   macro avg       0.64      0.53      0.50      2093
weighted avg       0.68      0.72      0.65      2093

Confusion Matrix:
[[1454   50]
 [ 529   60]]
カスタム閾値: 0.7000000000000001
Accuracy: 0.7219302436693741
AUC Score: 0.7242283170176642
Classification Report:
              precision    recall  f1-score   support

           0       0.72      1.00      0.84      1504
           1       0.71      0.02      0.04       589

    accuracy                           0.72      2093
   macro avg       0.71      0.51      0.44      2093
weighted avg       0.72      0.72      0.61      2093

Confusion Matrix:
[[1499    5]
 [ 577   12]]
カスタム閾値: 0.8
Accuracy: 0.7190635451505016
AUC Score: 0.7242283170176642
Classification Report:
              precision    recall  f1-score   support

           0       0.72      1.00      0.84      1504
           1       1.00      0.00      0.00       589

    accuracy                           0.72      2093
   macro avg       0.86      0.50      0.42      2093
weighted avg       0.80      0.72      0.60      2093

Confusion Matrix:
[[1504    0]
 [ 588    1]]
カスタム閾値: 0.9
C:\Users\atsuk\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\sklearn\metrics\_classification.py:1531: UndefinedMetricWarning: Precision is ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, f"{metric.capitalize()} is", len(result))
C:\Users\atsuk\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\sklearn\metrics\_classification.py:1531: UndefinedMetricWarning: Precision is ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, f"{metric.capitalize()} is", len(result))
C:\Users\atsuk\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\sklearn\metrics\_classification.py:1531: UndefinedMetricWarning: Precision is ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, f"{metric.capitalize()} is", len(result))
Accuracy: 0.7185857620640229
AUC Score: 0.7242283170176642
Classification Report:
              precision    recall  f1-score   support

           0       0.72      1.00      0.84      1504
           1       0.00      0.00      0.00       589

    accuracy                           0.72      2093
   macro avg       0.36      0.50      0.42      2093
weighted avg       0.52      0.72      0.60      2093

Confusion Matrix:
[[1504    0]
 [ 589    0]]
C:\Users\atsuk\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\sklearn\metrics\_classification.py:1531: UndefinedMetricWarning: Precision is ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, f"{metric.capitalize()} is", len(result))
C:\Users\atsuk\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\sklearn\metrics\_classification.py:1531: UndefinedMetricWarning: Precision is ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, f"{metric.capitalize()} is", len(result))
C:\Users\atsuk\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\sklearn\metrics\_classification.py:1531: UndefinedMetricWarning: Precision is ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, f"{metric.capitalize()} is", len(result))
Accuracy: 0.7185857620640229
AUC Score: 0.7242283170176642
Classification Report:
              precision    recall  f1-score   support

           0       0.72      1.00      0.84      1504
           1       0.00      0.00      0.00       589

    accuracy                           0.72      2093
   macro avg       0.36      0.50      0.42      2093
weighted avg       0.52      0.72      0.60      2093

Confusion Matrix:
[[1504    0]
 [ 589    0]]
モデルのトレーニングが完了しました
             特徴量       重要度
2      全国勝率_Zスコア  0.267860
3    全国2連対率_Zスコア  0.173842
7      当地勝率_Zスコア  0.142013
6    当地2連対率_Zスコア  0.105168
8     展示タイム_Zスコア  0.099174
4  モーター2連対率_Zスコア  0.082395
5   ボート2連対率_Zスコア  0.078111
1             体重  0.037555
0             天気  0.013883



# 考察
用語解説
正確性（Accuracy）：モデルが全体的にどれだけ正確に予測できるかを示します。
精度（Precision）：正と予測された中で、実際に正である割合。
再現率（Recall）：実際に正であるデータの中で、正と予測された割合。
F1スコア：精度と再現率の調和平均で、バランスの取れたモデルの性能を示します。

どれが大切か考える。
Recallが高いほど、実際の1の結果を多めに捉える。そう考えると、1のRecallが高く、バランスも良い通常時のモデルがよさそう？
0の精度が低い（0と予想したとき50%しか正解していない）のは少し問題？

2連対率については、あってもなくても結果がそこまで変わらないので、なくてよさそう。

枠ごとの特徴量は偏差値（Zスコア）のほうがいい。

全国勝率も当地勝率もあった方がいい。


勝率と2連率どちらを用いるかは非常に難しい。

1号艇が複勝する場合の予測の正確さを最優先する場合、通常時のモデルが適している。
これは、高いAccuracyと非常に高いクラス1の再現率により、ほとんどの複勝を正確に捉えることができるためである。

クラス0とクラス1の成績のバランスを取ることが重要な場合（つまり、1号艇が複勝しない場合の予測も重要視する場合）、2連率のみのモデルが適している。
このモデルは、両クラスの成績が比較的均等であり、よりバランスの取れた予測を提供する。

多く買ってたくさん的中を目指すか、絞って穴を狙うかに近い。





